<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.0.8/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-dialog-popup-component/dist/aframe-dialog-popup-component.min.js"></script>
  </head>
  <style>
  #scoreBar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 50px;
    background-color: #333;
    color: white;
    font-size: 20px;
    text-align: center;
    line-height: 50px;
  }
</style>
  <body>
    <div id="scoreBar">
      <span id="score">Fragen <span id="totalQuestions"></span>/<span id="questionsSoFare"></span> - Richtig beantwortet: <span id="correctAnswers">
      </span>
    </div>
    <a-scene embedded arjs='sourceType: webcam;' antialias="true" renderer="logarithmicDepthBuffer: true" >  <!-- Benutzerdefinierte Marker -->
      <a-assets>
        <a-asset-item id="scene" src="gltf/scene.gltf"></a-asset-item>
      </a-assets> 

      <!-- Marker 1 -->
      <a-marker id="marker1" type="pattern" url="marker\pattern-A_Marker.patt">
        <a-gltf-model src="#scene" scale="1 1 1" rotation="-90 0 0" position="0 0.2 0" id="image1" material="side: double;" cursor-listener></a-gltf-model>
        <a-text value="Autor:" position="0.7 0 -0.5" rotation="-90 0 0" color="white"></a-text>
        
        <!-- Antwortobjekte, die zunächst unsichtbar sind -->
        <a-entity class="answer" visible="false" scale="0.05 0.05 0.05" rotation="0 90 0" geometry="primitive: box; width: 1.5; height: 1.5; depth: 1.5" material="color: blue" position="-0.55 0.5 0.7" right-answer></a-entity>
        <a-entity class="answer" visible="false" scale="0.05 0.05 0.05" rotation="0 90 0" geometry="primitive: sphere; radius: 1" material="color: yellow" position="0.1 0.5 0.7" false-answer ></a-entity>
        <a-entity class="answer" visible="false" scale="0.05 0.05 0.05" rotation="0 90 0" geometry="primitive: cylinder; radius: 0.75; height: 1" material="color: green" position="-0.55 0.5 0.6" false-answer ></a-entity>
        <a-entity class="answer" visible="false" scale="0.05 0.05 0.05" rotation="0 90 0" geometry="primitive: box; width: 1.5; height: 1.5; depth: 1.5" material="color: red" position="0.1 0.5 0.6" false-answer ></a-entity>
        
        <a-plane class="answer" visible="false" position="0 0 -1" width="3" height="1" color="#ffffff" rotation="-90 0 0" opacity="0.8">
          <a-text class="answer" visible="false" value="Was ist die Hauptstadt von Frankreich?" color="#000000"></a-text>
        </a-plane>

        <!-- Antwortmöglichkeiten -->
        <a-text value="Paris"  class="answer" visible="false" position="-0.55 0.5 0.6" rotation="-90 0 0" color="white"></a-text>
        <a-text value="Berlin"  class="answer" visible="false" position="0.1 0.5 0.6" rotation="-90 0 0" color="white"></a-text>
        <a-text value="Madrid"  class="answer" visible="false" position="-0.55 0.5 0.7" rotation="-90 0 0" color="white"></a-text>
        <a-text value="Rom"  class="answer" visible="false" position="0.1 0.5 0.7" rotation="-90 0 0" color="white"></a-text>       
      </a-marker>

      <!-- Weitere Marker hier einfügen -->

      <!-- Kamera mit Cursor und Raycaster -->
      <a-camera-static raycaster="objects: .raycastable">
        <a-cursor
          animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 150; from: 0.1 0.1 0.1; to: 1 1 1"
          animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
          animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1"
          fuse="true"
          fuse-timeout="1500"
          material="color: yellow; shader: flat"
          position="0 0 -3"
          geometry="primitive: ring">
        </a-cursor>
      </a-camera-static>
    </a-scene>

    <script>
    var correctAnswers = 0; 
    var totalQuestions = 6;
    var questionsSoFare = 0;

      AFRAME.registerComponent('cursor-listener', {
        init: function () {
          var el = this.el;

          // Füge einen Event-Listener für das 'click'-Ereignis auf das Modell hinzu
          el.addEventListener('click', function () {
            // Zeige die Antwortobjekte an, indem ihre Sichtbarkeit geändert wird
            var answerObjects = document.querySelectorAll('.answer');
            answerObjects.forEach(function (answerObject) {
              answerObject.setAttribute('visible', true);
            });
          });
        }
      });

      AFRAME.registerComponent('right-answer', {
        init: function () {
          var el = this.el;


          // Füge einen Event-Listener für das 'click'-Ereignis auf das Modell hinzu
          el.addEventListener('click', function () {
            // Zeige die Antwortobjekte an, indem ihre Sichtbarkeit geändert wird
            var answerObjects = document.querySelectorAll('.answer');
            answerObjects.forEach(function (answerObject) {
            answerObject.setAttribute('visible', false);
            });
            correctAnswers++;
            questionsSoFare++;
            updateScoreText();
          });
        }
      });

      AFRAME.registerComponent('false-answer', {
        init: function () {
          var el = this.el;

          // Füge einen Event-Listener für das 'click'-Ereignis auf das Modell hinzu
          el.addEventListener('click', function () {
            // Zeige die Antwortobjekte an, indem ihre Sichtbarkeit geändert wird
            var answerObjects = document.querySelectorAll('.answer');
            answerObjects.forEach(function (answerObject) {
              answerObject.setAttribute('visible', false);
            });
            questionsSoFare++;
            updateScoreText();
          });
        }
      });

        function updateScoreText() {
    var scoreElement = document.getElementById('score');
    scoreElement.textContent = `Fragen ${totalQuestions}/${questionsSoFare} - Richtig beantwortet: ${correctAnswers}`;
  }


      document.getElementById('totalQuestions').textContent = totalQuestions;
      document.getElementById('questionsSoFare').textContent = questionsSoFare;
      document.getElementById('correctAnswers').textContent = correctAnswers;

    </script>
  </body>
</html>




